"use strict";(self.webpackChunkblog_notes_aleo=self.webpackChunkblog_notes_aleo||[]).push([[322],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),l=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,u=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,g=d["".concat(u,".").concat(m)]||d[m]||p[m]||s;return n?a.createElement(g,i(i({ref:t},c),{},{components:n})):a.createElement(g,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=d;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var l=2;l<s;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7957:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return p}});var a=n(7462),r=n(3366),s=(n(7294),n(3905)),i=["components"],o={},u="Docusaurus 2",l={unversionedId:"ssg/docusaurus",id:"ssg/docusaurus",title:"Docusaurus 2",description:"1. Pr\xe9sentation de Docusaurus",source:"@site/docs/ssg/docusaurus.md",sourceDirName:"ssg",slug:"/ssg/docusaurus",permalink:"/ssg/docusaurus",draft:!1,tags:[],version:"current",lastUpdatedBy:"Aleowyne",lastUpdatedAt:1677623191,formattedLastUpdatedAt:"28 f\xe9vr. 2023",frontMatter:{},sidebar:"docs",previous:{title:"Sommaire",permalink:"/"},next:{title:"Git",permalink:"/tool/git"}},c={},p=[{value:"1. Pr\xe9sentation de Docusaurus",id:"1-pr\xe9sentation-de-docusaurus",level:2},{value:"2. Installation d&#39;un nouveau projet Docusaurus",id:"2-installation-dun-nouveau-projet-docusaurus",level:2},{value:"3. Customisation du projet",id:"3-customisation-du-projet",level:2},{value:"3.1 Configuration globale du projet",id:"31-configuration-globale-du-projet",level:3},{value:"3.2 Menu lat\xe9ral de la documentation",id:"32-menu-lat\xe9ral-de-la-documentation",level:3},{value:"3.3 Modification du fichier de style",id:"33-modification-du-fichier-de-style",level:3},{value:"3.4 Mise en place d\u2019une recherche locale",id:"34-mise-en-place-dune-recherche-locale",level:3},{value:"4. D\xe9ploiement du projet avec GitHub Pages",id:"4-d\xe9ploiement-du-projet-avec-github-pages",level:2}],d={toc:p};function m(e){var t=e.components,o=(0,r.Z)(e,i);return(0,s.kt)("wrapper",(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"docusaurus-2"},"Docusaurus 2"),(0,s.kt)("h2",{id:"1-pr\xe9sentation-de-docusaurus"},"1. Pr\xe9sentation de Docusaurus"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://v2.docusaurus.io/"},"Docusaurus 2")," est un g\xe9n\xe9rateur de site web statique.",(0,s.kt)("br",{parentName:"p"}),"\n","Il est particuli\xe8rement utilis\xe9 pour g\xe9n\xe9rer des sites de documentation, mais il est possible de cr\xe9er n'importe quel type de site web statique. Docusaurus est construit avec React et peut \xeatre customis\xe9 selon les besoins.  "),(0,s.kt)("p",null,"Le contenu de votre site est r\xe9dig\xe9 gr\xe2ce \xe0 la syntaxe markdown (md et mdx).",(0,s.kt)("br",{parentName:"p"}),"\n","Un ",(0,s.kt)("a",{parentName:"p",href:"https://v2.docusaurus.io/docs/search/"},"moteur de recherche")," bas\xe9 sur Algolia ou Typesense peut \xeatre install\xe9 sur votre site. Il est \xe9galement possible de mettre en place une recherche locale gr\xe2ce \xe0 des plugins.",(0,s.kt)("br",{parentName:"p"}),"\n","Le ",(0,s.kt)("a",{parentName:"p",href:"https://v2.docusaurus.io/docs/styling-layout/#styling-your-site-with-infima"},"style")," du site peut \xe9galement \xeatre modifi\xe9 avec ",(0,s.kt)("a",{parentName:"p",href:"https://facebookincubator.github.io/infima/"},"Infima"),".",(0,s.kt)("br",{parentName:"p"}),"\n","Votre site peut \xeatre traduit dans plusieurs langues.",(0,s.kt)("br",{parentName:"p"}),"\n","La documentation peut \xeatre synchronis\xe9e avec les diff\xe9rentes versions d\u2019un projet."),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"2-installation-dun-nouveau-projet-docusaurus"},"2. Installation d'un nouveau projet Docusaurus"),(0,s.kt)("p",null,"En pr\xe9requis, Node.js, avec une version 16.14 ou sup\xe9rieure, doit \xeatre install\xe9. Si vous le souhaitez, vous pouvez utiliser Yarn pour la gestion des packages."),(0,s.kt)("p",null,"Cr\xe9ation d'un nouveau projet avec le template classic propos\xe9 par Docusaurus :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npm init docusaurus\n")),(0,s.kt)("p",null,"Le projet a la structure suivante :"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Dossier ",(0,s.kt)("inlineCode",{parentName:"li"},"blog")," qui contient tous les articles du blog au format markdown"),(0,s.kt)("li",{parentName:"ul"},"Dossier ",(0,s.kt)("inlineCode",{parentName:"li"},"docs")," qui contient les fichiers de la documentation au format markdown"),(0,s.kt)("li",{parentName:"ul"},"Dossier ",(0,s.kt)("inlineCode",{parentName:"li"},"src/css")," qui contient les fichiers de style css"),(0,s.kt)("li",{parentName:"ul"},"Dossier ",(0,s.kt)("inlineCode",{parentName:"li"},"src/pages")," qui contient les pages de premier niveau du site - ",(0,s.kt)("a",{parentName:"li",href:"https://v2.docusaurus.io/docs/creating-pages/"},"Cr\xe9ation de pages")),(0,s.kt)("li",{parentName:"ul"},"Dossier ",(0,s.kt)("inlineCode",{parentName:"li"},"static/img")," qui contient les images du site"),(0,s.kt)("li",{parentName:"ul"},"Fichier ",(0,s.kt)("inlineCode",{parentName:"li"},"docusaurus.config.js")," qui contient la configuration du site"),(0,s.kt)("li",{parentName:"ul"},"Fichier ",(0,s.kt)("inlineCode",{parentName:"li"},"sidebars.js")," qui contient le menu lat\xe9ral de la documentation")),(0,s.kt)("p",null,"Ex\xe9cution locale du site sur le serveur de d\xe9veloppement qui affichera automatiquement le site \xe0 l'adresse http://localhost:3000 dans votre navigateur pr\xe9f\xe9r\xe9 : "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npm start\n")),(0,s.kt)("p",null,"Cr\xe9ation de la version statique du site dans le dossier ",(0,s.kt)("inlineCode",{parentName:"p"},"build"),", puis affichage dans le navigateur :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\nnpm run serve\n")),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"3-customisation-du-projet"},"3. Customisation du projet"),(0,s.kt)("h3",{id:"31-configuration-globale-du-projet"},"3.1 Configuration globale du projet"),(0,s.kt)("p",null,"A la cr\xe9ation d'un nouveau projet, trois parties sont disponibles dans le menu du site : la page d'accueil du site, la documentation et le blog.",(0,s.kt)("br",{parentName:"p"}),"\n","Sur mon blog-notes, la page d'accueil (fichier ",(0,s.kt)("inlineCode",{parentName:"p"},"src/pages/index.js"),") et le dossier blog ont \xe9t\xe9 supprim\xe9es pour n'avoir que la documentation."),(0,s.kt)("p",null,"Modification du fichier ",(0,s.kt)("inlineCode",{parentName:"p"},"docusaurus.config.js")," pour que la page principale du site pointe vers le contenu du fichier ",(0,s.kt)("inlineCode",{parentName:"p"},"index.md")," pr\xe9sent dans les docs :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'{7-8} title="docusaurus.config.js"',"{7-8}":!0,title:'"docusaurus.config.js"'},"  ...\n  presets: [\n    [\n      '@docusaurus/preset-classic',\n      {\n        docs: {\n          routeBasePath: '/',\n          sidebarPath: require.resolve('./sidebars.js'),\n          showLastUpdateAuthor: true,\n          showLastUpdateTime: true,\n        },\n        theme: {\n          customCss: require.resolve('./src/css/custom.css'),\n        },\n      },\n    ],\n  ],\n  ...\n")),(0,s.kt)("p",{align:"center"},(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Architecture du projet",src:n(961).Z,width:"221",height:"536"}),(0,s.kt)("br",{parentName:"p"}),"\n",(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("em",{parentName:"strong"},"Architecture du projet")))),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"32-menu-lat\xe9ral-de-la-documentation"},"3.2 Menu lat\xe9ral de la documentation"),(0,s.kt)("p",null,"Le fichier ",(0,s.kt)("inlineCode",{parentName:"p"},"sidebars.js")," permet de g\xe9rer le menu lat\xe9ral de la documentation. Il peut y avoir plusieurs menus lat\xe9raux dans ce fichier.",(0,s.kt)("br",{parentName:"p"}),"\n","Sur le projet, la sidebar est g\xe9n\xe9r\xe9e automatiquement."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="sidebars.js"',title:'"sidebars.js"'},'module.exports = {\n  docs: [\n    "index",\n    {\n      type: "category",\n      label: "G\xe9n\xe9rateurs de site statique",\n      items: [\n        {\n          type: "autogenerated", dirName: "ssg"\n        }\n      ]\n    },\n  ]\n};\n')),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"33-modification-du-fichier-de-style"},"3.3 Modification du fichier de style"),(0,s.kt)("p",null,"Sur le blog-notes, les couleurs primaires du site ont \xe9t\xe9 modifi\xe9es pour qu\u2019elles s\u2019orientent sur du bleu plut\xf4t que du vert. Vous pouvez utiliser l'",(0,s.kt)("a",{parentName:"p",href:"https://v2.docusaurus.io/docs/styling-layout#styling-your-site-with-infima"},"outil")," propos\xe9 sur le site de docusaurus pour g\xe9n\xe9rer les couleurs primaires."),(0,s.kt)("p",null,"Un fond bleu nuit et un texte grisonnant ont \xe9galement \xe9t\xe9 ajout\xe9s quand le site est avec le th\xe8me \u201cDark\u201d, afin de ne pas agresser les yeux."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="src/css/custom.css"',title:'"src/css/custom.css"'},":root {\n  --ifm-code-font-size: 95%;\n  --ifm-color-primary: #5c8cda;\n  --ifm-color-primary-dark: #437ad4;\n  --ifm-color-primary-darker: #3671d1;\n  --ifm-color-primary-darkest: #285cb1;\n  --ifm-color-primary-light: #759ee0;\n  --ifm-color-primary-lighter: #82a7e3;\n  --ifm-color-primary-lightest: #a8c1eb;\n  --ifm-container-width: 1500px;\n}\n\n.docusaurus-highlight-code-line {\n  background-color: rgb(72, 77, 91);\n  display: block;\n  margin: 0 calc(-1 * var(--ifm-pre-padding));\n  padding: 0 var(--ifm-pre-padding);\n}\n\nhtml[data-theme='dark'] {\n  --ifm-background-color: rgb(21, 32, 43);\n  --ifm-color-content: #bbc2cf;\n}\n")),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"34-mise-en-place-dune-recherche-locale"},"3.4 Mise en place d\u2019une recherche locale"),(0,s.kt)("p",null,"Sur le blog-notes, une recherche locale a \xe9t\xe9 mise en place avec le plugin ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/easyops-cn/docusaurus-search-local"},"@easyops-cn/docusaurus-search-local"),"."),(0,s.kt)("p",null,"Installation du plugin :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save @easyops-cn/docusaurus-search-local\n")),(0,s.kt)("p",null,"Modification du fichier ",(0,s.kt)("inlineCode",{parentName:"p"},"docusaurus.config.js")," :"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="docusaurus.config.js"',title:'"docusaurus.config.js"'},'module.exports = {\n  ...\n  themes: [\n    [\n      require.resolve("@easyops-cn/docusaurus-search-local"),\n      ({\n        docsRouteBasePath: "/",\n        hashed: true,\n        language: ["fr"],\n      }),\n    ],\n  ],\n  ...\n}\n')),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"4-d\xe9ploiement-du-projet-avec-github-pages"},"4. D\xe9ploiement du projet avec GitHub Pages"),(0,s.kt)("p",null,"Le d\xe9p\xf4t GitHub ",(0,s.kt)("inlineCode",{parentName:"p"},"username.github.io")," doit \xeatre cr\xe9\xe9 au pr\xe9alable.",(0,s.kt)("br",{parentName:"p"}),"\n","Sur le projet, un d\xe9ploiement automatique a \xe9t\xe9 mis en place avec les actions GitHub, pour que le build soit effectu\xe9 lors d\u2019un push sur le d\xe9p\xf4t GitHub."),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Dans le dossier du projet Docusaurus, initialisation d'un d\xe9p\xf4t git")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"cd mon_site\ngit init\n")),(0,s.kt)("br",null),(0,s.kt)("ol",{start:2},(0,s.kt)("li",{parentName:"ol"},"Cr\xe9ation d'une connexion avec le d\xe9p\xf4t distant GitHub")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"git remote add origin https://github.com/username/username.github.io\n")),(0,s.kt)("br",null),(0,s.kt)("ol",{start:3},(0,s.kt)("li",{parentName:"ol"},"Cr\xe9ation de deux branches ",(0,s.kt)("inlineCode",{parentName:"li"},"dev")," et ",(0,s.kt)("inlineCode",{parentName:"li"},"gh-pages")," avec la branche ",(0,s.kt)("inlineCode",{parentName:"li"},"dev")," d\xe9finie par d\xe9faut.")),(0,s.kt)("p",null,"La branche ",(0,s.kt)("inlineCode",{parentName:"p"},"gh-pages")," contiendra le code g\xe9n\xe9r\xe9 du site statique et la branche ",(0,s.kt)("inlineCode",{parentName:"p"},"dev")," contiendra le code source du site statique."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"git checkout gh-pages\ngit checkout -b dev\n")),(0,s.kt)("br",null),(0,s.kt)("ol",{start:4},(0,s.kt)("li",{parentName:"ol"},"Cr\xe9ation d\u2019un fichier ",(0,s.kt)("inlineCode",{parentName:"li"},"deploy.yml")," dans le dossier ",(0,s.kt)("inlineCode",{parentName:"li"},".github/workflows"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="deploy.yml"',title:'"deploy.yml"'},"name: Deploy to GitHub Pages\n\non:\n  push:\n    branches:\n      - dev\n    # Review gh actions docs if you want to further define triggers, paths, etc\n    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on\n\njobs:\n  deploy:\n    name: Deploy to GitHub Pages\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: 18\n          cache: npm\n\n      - name: Install dependencies\n        run: npm ci\n      - name: Build website\n        run: npm run build\n\n      # Popular action to deploy to GitHub Pages:\n      # Docs: https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus\n      - name: Deploy to GitHub Pages\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          # Build output to publish to the `gh-pages` branch:\n          publish_dir: ./build\n          # The following lines assign commit authorship to the official\n          # GH-Actions bot for deploys to `gh-pages` branch:\n          # https://github.com/actions/checkout/issues/13#issuecomment-724415212\n          # The GH actions bot is used by default if you didn't specify the two fields.\n          # You can swap them out with your own user credentials.\n          user_name: github-actions[bot]\n          user_email: 41898282+github-actions[bot]@users.noreply.github.com\n")),(0,s.kt)("br",null),(0,s.kt)("ol",{start:5},(0,s.kt)("li",{parentName:"ol"},"Push des modifications sur le GitHub et d\xe9ploiement automatique sur l\u2019URL ",(0,s.kt)("a",{parentName:"li",href:"https://username.github.io"},"https://username.github.io"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'git add .\ngit commit -m "Message du commit"\ngit push\n')))}m.isMDXComponent=!0},961:function(e,t,n){t.Z=n.p+"assets/images/docusaurus_1-29c188e16e0bc8040a942c70f18804ec.png"}}]);